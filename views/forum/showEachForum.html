{{extend 'layout.html'}}
{{student = db.auth_user(forum.user_id)}}
<html lang="en">
<style>
table, th, td {
    border: 1px solid gray;
    border-color: #488089 #488089 #3d4b52 #488089;
    border-collapse: collapse;
    margin: 0 auto;
}
</style>
<body style="background:#2c2a35; ">
<div  class ='well' style="background:#2c2a33;">
<table  style="width:88%; ">
    <tr bgcolor="#184343" size="6" style="font-family:verdana;font-size:90%;color:white;height:90px">
        <th ><div style="font-family:verdana;font-size:200%;color:#ffd9b3;" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{=forum.title}}</div>
        <div style = "text-align:left;color: #cc6600;font-size:90%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <i>{{=(student.first_name+' '+student.last_name)}} created by {{=forum.datetime}}</i></div>
        </th>
    </tr>

    <tr bgcolor="#184343" size="6" style="height:250px">
        <td  valign="top" style="text-align:char;"><div style="font-family:verdana;font-size:100%;color:#ffd9b3;" ><p>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{=forum.body}}</p></div>
        </td>
    </tr>
    {{forumimages}}
    <tr bgcolor="#184343" style="height:80px">
    <td><div class="one" id="one" style = "text-align:center"></div>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        {{for image in forumimages:}}
          <img style= "width:70px; height:70px;" onmouseover="bigImg(this)" onmouseout="normalImg(this)" class="img-thumbnail" src="{{=URL('download', args=image.image)}}" />
        {{pass}}
    </td>
    </tr>
</table>
</div>

{{if len(comms):}}
<h2 style = "text-align:left;color: #cc6600;">Comments:</h2>
<p>
{{for comment in comms:}}
{{commStudent=db.auth_user(comment.user_id)}}
<div style="text-align:center">
    <i style = "text-align:center;color: #cc6600;">User: {{=A(string.capwords(commStudent.first_name+' '+commStudent.last_name), _href=URL('userProfile','showProfile',args=[commStudent.id], vars=dict(controller=request.controller,function=request.function,args=request.args)))}}
    Time: {{=comment.datetime}}</i>
</div>

<div class ="well" style="background:#2c2a30;">
    <table style="width:88%; ">
        <tr bgcolor="#184343">
        <td>
        <ul style="list-style-type:none">
            <li><div style="font-family:verdana;font-size:100%;color:#ffd9b3;"><p>{{=comment.body}}</p></div></li>
        </ul>
        {{if auth.user_id == comment.user_id:}}
        <div style="text-align:right">
        <p><b>{{=A('edit', _class='btn btn-link', _href=URL('editForumComment',args=[comment.id,forum.id]))}}</b></p>
        </div>
        {{pass}}
        </td>
        </tr>
    </table>
</div>
{{pass}}
</p>
{{else:}}
  <h4 style = "text-align:left;color: #cc6600;">No comments posted yet</h4>
{{pass}}


<br>

<div style="text-align:justify">
<h2 style = "text-align:left;color: #cc6600;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New Post:</h2>
<ul style="list-style-type:none">
        <li>{{=form}}</li>
</ul>
</div>

<br>
[{{=A('goback', _href=URL('generalForum'))}}]
[{{=A('Edit This Forum!', _href=URL('editForum', args=forum.id))}}]
[{{=A('Add New Comment!', _href=URL('addComment', args=forum.id))}}]
</body>
</html>

<script>
$(document).ready(function() {
    
    $('.img-thumbnail').on('click', function() {
        var img = $('<img />', {src    : this.src,
                                'class': 'fullImage'
                  });

        $('DIV.one').html(img).show();
    });
});
function bigImg(x) {
    x.style.height = "90px";
    x.style.width = "90px";
}

function normalImg(x) {
    x.style.height = "70px";
    x.style.width = "70px";
}

</script>
